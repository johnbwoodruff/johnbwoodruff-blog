<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Component Libraries with Stencil.js - Getting Started</title><meta name="description" content="The second in a series of posts about creating a component library using Stencil.js"><!-- Favicon assets --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><!-- Stylesheets --><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" href="/css/projects.css"><link rel="stylesheet" href="/css/about.css"><link rel="stylesheet" href="/css/404.css"><link rel="stylesheet" href="/css/prism-base16-monokai.dark.css"><!-- RSS Feed --><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="John Woodruff"></head> <body> <header class="main-header"> <h1 class="home"> <a href="/">John Woodruff</a> </h1> <nav> <ul class="nav"> <li class="nav-item"> <a href="/">Home</a> </li> <li class="nav-item"> <a href="/projects/">Projects</a> </li> <li class="nav-item"> <a href="/about/">About Me</a> </li> </ul> </nav> </header> <main class="tmpl-post">   <img src="/img/stenciljs.png" alt="Stencil.js logo" class="post-cover-image"><h1>Component Libraries with Stencil.js - Getting Started</h1> <time datetime="2018-09-16T00:00:00.000Z">September 15, 2018</time> <div class="post-tag">stencil</div><div class="post-tag">webcomponents</div><div class="post-tag">typescript</div> <p><em>This is the second in a series of posts about creating a web component library using Stencil.js - Check out the <a href="/posts/about-stencil">first post</a></em></p>
<p>Now that we’ve talked about the reasoning for choosing Stencil to build our web component library, let’s jump right in. First things first, we need to get our base project structure set up. Thankfully, the Ionic team has handled this completely for us. Make sure you’re running <code>npm</code> at version 6 or later, and run the following command:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E22E">$</span><span style="color:#E6DB74"> npm</span><span style="color:#E6DB74"> init</span><span style="color:#E6DB74"> stencil</span></span></code></pre>
<p>You should get a prompt similar to the following:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#F92672">?</span><span style="color:#F8F8F2"> Pick a starter › - Use arrow-keys. Return to submit.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">   ionic-pwa</span><span style="color:#E6DB74">     Everything</span><span style="color:#E6DB74"> you</span><span style="color:#E6DB74"> need</span><span style="color:#E6DB74"> to</span><span style="color:#E6DB74"> build</span><span style="color:#E6DB74"> fast,</span><span style="color:#E6DB74"> production</span><span style="color:#E6DB74"> ready</span><span style="color:#E6DB74"> PWAs</span></span>
<span class="line"><span style="color:#A6E22E">   app</span><span style="color:#E6DB74">           Minimal</span><span style="color:#E6DB74"> starter</span><span style="color:#E6DB74"> for</span><span style="color:#E6DB74"> building</span><span style="color:#E6DB74"> a</span><span style="color:#E6DB74"> Stencil</span><span style="color:#E6DB74"> app</span><span style="color:#E6DB74"> or</span><span style="color:#E6DB74"> website</span></span>
<span class="line"><span style="color:#A6E22E">❯</span><span style="color:#E6DB74">  component</span><span style="color:#E6DB74">     Collection</span><span style="color:#E6DB74"> of</span><span style="color:#E6DB74"> web</span><span style="color:#E6DB74"> components</span><span style="color:#E6DB74"> that</span><span style="color:#E6DB74"> can</span><span style="color:#E6DB74"> be</span><span style="color:#E6DB74"> used</span><span style="color:#E6DB74"> anywhere</span></span></code></pre>
<p>The Ionic team has provided a few starters for us. We’re not interested in building an entire app or PWA using Stencil (although you definitely can!) so we’re going to choose the <code>component</code> option. This will structure it so we can build a reusable component library for distribution.</p>
<p>You’ll be asked to name your collection, so go ahead and name that however you’d like. The component library I’ll be building is one I’m calling <code>mountain-ui</code>, because I live in Utah among the beautiful Wasatch mountain range.</p>
<p>Once the starter is created, you can <code>cd</code> into your newly created directory and run <code>npm start</code>. That’ll open the project in your browser with a basic web component they put there as a start. We’ll jump into writing a component in a minute, but let’s first go over the project structure and figure out where things go.</p>
<h2 id="project-structure">Project Structure</h2>
<p>You’ll notice a few directories. The main one you’ll want to concern yourself with is <code>src</code>. Other important directories to note are <code>www</code>, which is where your compiled components go when you’re developing, and <code>dist</code>, which is where your actual distribution is after running a production build.</p>
<p>There are a few other important files to look at before we get to the components. If you’ve written TypeScript before you’ll recognize the <code>tsconfig.json</code> which defines our TypeScript compiler options. The other important file is <code>stencil.config.ts</code>. This file defines your Stencil build and its various options. We’ll change a couple of things there later on in this post. Finally there’s <code>src/components.d.ts</code> which is a file you won’t ever modify yourself. It’s a file generated by stencil at build time that keeps all your library’s TypeScript definitions up to date.</p>
<h2 id="components">Components</h2>
<p>The <code>src/components</code> directory is where you’ll be spending most of your time. We’re going to be keeping each component in its own separate folder. You’ll notice a <code>my-component</code> directory in there by default, with three files inside. The main file is <code>my-component.tsx</code>. This is the TSX file that keeps the component class, its render method, and other methods and props associated with your component. There is also a corresponding <code>my-component.spec.ts</code> file that is used for testing your component. Finally there is <code>my-component.css</code>, which is where your styles live. By default you have CSS files, but you can use CSS preprocessors such as SASS.</p>
<h2 id="configuring-our-library">Configuring our Library</h2>
<p>There are a few things we’ll want to do right at the beginning before moving on to building components. Let’s start in the <code>stencil.config.ts</code> file. The first thing we’ll change is the <code>namespace</code> value. By default it is set to <code>mycomponent</code>, but we’re going to change this to the name of our library. In my case, I’ll be changing the value to <code>mountain-ui</code>. Because we changed the namespace, let’s also make sure that name is reflected correctly in the <code>src/index.html</code> file. Make sure you have the following script tags at the top of your file:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#F92672">script</span><span style="color:#A6E22E"> type</span><span style="color:#F8F8F2">=</span><span style="color:#E6DB74">"module"</span><span style="color:#A6E22E"> src</span><span style="color:#F8F8F2">=</span><span style="color:#E6DB74">"/build/mountain-ui.esm.js"</span><span style="color:#F8F8F2">>&#x3C;/</span><span style="color:#F92672">script</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#F92672">script</span><span style="color:#A6E22E"> nomodule</span><span style="color:#A6E22E"> src</span><span style="color:#F8F8F2">=</span><span style="color:#E6DB74">"/build/mountain-ui.js"</span><span style="color:#F8F8F2">>&#x3C;/</span><span style="color:#F92672">script</span><span style="color:#F8F8F2">></span></span></code></pre>
<p>The next thing to do is set up a CSS preprocessor. This is not required, many people will prefer to use plain CSS and that’s great. The available plugins for Stencil are listed on the <a href="https://stenciljs.com/docs/plugins">Plugins</a> page. Personally I love using SASS, so I’m going to be setting that up for my project.</p>
<p>First we’ll need to install the appropriate plugin. In my case I’ll be running the following command (note that I’m using yarn, but you’re welcome to use whatever you prefer):</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#A6E22E">$</span><span style="color:#E6DB74"> yarn</span><span style="color:#E6DB74"> add</span><span style="color:#AE81FF"> --dev</span><span style="color:#E6DB74"> @stencil/sass</span></span></code></pre>
<p>Once the plugin is installed, I’ll be importing it in the config file, and passing it in to the <code>plugins</code> array in the config object. See the full file below:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> { Config } </span><span style="color:#F92672">from</span><span style="color:#E6DB74"> '@stencil/core'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> { sass } </span><span style="color:#F92672">from</span><span style="color:#E6DB74"> '@stencil/sass'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">export</span><span style="color:#66D9EF;font-style:italic"> const</span><span style="color:#F8F8F2"> config</span><span style="color:#F92672">:</span><span> </span><span style="color:#A6E22E;text-decoration:underline">Config</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  namespace: </span><span style="color:#E6DB74">'mountain-ui'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  outputTargets: [</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#F8F8F2">      type: </span><span style="color:#E6DB74">'dist'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">      esmLoaderPath: </span><span style="color:#E6DB74">'../loader'</span></span>
<span class="line"><span style="color:#F8F8F2">    },</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#F8F8F2">      type: </span><span style="color:#E6DB74">'docs-readme'</span></span>
<span class="line"><span style="color:#F8F8F2">    },</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#F8F8F2">      type: </span><span style="color:#E6DB74">'www'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">      serviceWorker: </span><span style="color:#AE81FF">null</span><span style="color:#88846F"> // disable service workers</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  ],</span></span>
<span class="line"><span style="color:#F8F8F2">  plugins: [</span><span style="color:#A6E22E">sass</span><span style="color:#F8F8F2">()]</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span></code></pre>
<p>That’s all you need to do to get your project set up for SASS. If you want to use one of the other preprocessors, simply install the appropriate plugin and follow the same steps above. The last thing I need to do is change <code>my-component.css</code> to <code>my-component.scss</code>, I’ll change the <code>styleUrl</code> in <code>my-component.tsx</code>, and any new components I create from now on will have an <code>scss</code> file instead of a <code>css</code> file.</p>
<h2 id="next-steps">Next Steps</h2>
<p>Now that we’ve fully configured our project, we’re free to build our components without worrying about configuration or build. In the <a href="/posts/first-stencil-component">next post</a> we’ll start to go into a detailed build of our first component!</p>
<p><em>Simply want to see the end result repo? Check it out <a href="https://github.com/johnbwoodruff/mountain-ui">here</a></em></p>   </main> <footer class="main-footer"> <small>Copyright © 2025 • John Woodruff</small> </footer> <!-- Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46243905-9"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-46243905-9');
    </script> </body> </html>