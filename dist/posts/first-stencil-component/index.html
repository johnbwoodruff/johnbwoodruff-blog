<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Component Libraries with Stencil.js - Your First Component</title><meta name="description" content="The third in a series of posts about creating a component library using Stencil.js"><!-- Favicon assets --><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><!-- Stylesheets --><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" href="/css/projects.css"><link rel="stylesheet" href="/css/about.css"><link rel="stylesheet" href="/css/404.css"><link rel="stylesheet" href="/css/prism-base16-monokai.dark.css"><!-- RSS Feed --><link rel="alternate" href="/feed.xml" type="application/atom+xml" title="John Woodruff"></head> <body> <header class="main-header"> <h1 class="home"> <a href="/">John Woodruff</a> </h1> <nav> <ul class="nav"> <li class="nav-item"> <a href="/">Home</a> </li> <li class="nav-item"> <a href="/projects/">Projects</a> </li> <li class="nav-item"> <a href="/about/">About Me</a> </li> </ul> </nav> </header> <main class="tmpl-post">   <img src="/img/stenciljs.png" alt="Stencil.js logo" class="post-cover-image"><h1>Component Libraries with Stencil.js - Your First Component</h1> <time datetime="2018-09-17T00:00:00.000Z">September 16, 2018</time> <div class="post-tag">stencil</div><div class="post-tag">webcomponents</div><div class="post-tag">typescript</div> <p><em>This is the third in a series of posts about creating a web component library using Stencil.js - Check out the <a href="/posts/about-stencil">first post</a></em></p>
<p>We’ve done a lot of setup so far, now let’s create our first component. This is the foundation of any component library: the button component. Let’s rename the <code>my-component</code> folder to <code>button</code>, and all the files inside replacing <code>my-component</code> to <code>button</code>. We’re now ready to build our button.</p>
<h2 id="component-decorator">Component Decorator</h2>
<p>The first thing we’re going to do is change the contents of <code>button.tsx</code>. We’re going to change the <code>tag</code> in the <code>@Component</code> decorator to our actual tag name, and the <code>styleUrl</code> to point to our newly renamed SCSS file, in my case the following:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#F8F8F2">@</span><span style="color:#A6E22E">Component</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#F8F8F2">  tag: </span><span style="color:#E6DB74">'mtn-button'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  styleUrl: </span><span style="color:#E6DB74">'button.scss'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  shadow: </span><span style="color:#AE81FF">true</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span></code></pre>
<p>Note the <code>shadow</code> property. This is declaring that we will be using the <a href="https://developers.google.com/web/fundamentals/web-components/shadowdom">Shadow DOM</a> for this component. This has many benefits including an isolated DOM and scoped CSS, among others. We’ll definitely want to be taking advantage of this, as it’s one of the key parts of web components.</p>
<h2 id="render-methodjsx">Render Method/JSX</h2>
<p>Next we’re going to change the class to render a plain button with a single prop.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#F92672">export</span><span style="color:#66D9EF;font-style:italic"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline">Button</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#A6E22E">  render</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">      &#x3C;</span><span style="color:#F92672">button</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;</span><span style="color:#F92672">slot</span><span style="color:#F8F8F2"> /></span></span>
<span class="line"><span style="color:#F8F8F2">      &#x3C;/</span><span style="color:#F92672">button</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Looking at the render method, you’ll notice we’re not writing HTML. We’re using a JavaScript syntax extension called <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> or JavaScript XML. Note with Stencil we’re actually using TSX, a file with the ability to write JSX using TypeScript. Let’s change the markup to render a standard HTML button. We’re also placing a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot">slot</a> inside the button. This is a part of the suite of browser web component APIs; it allows us to fill that slot with markup defined by the consumer of the component. In our case, consuming this component would look like this:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#F92672">mtn-button</span><span style="color:#F8F8F2">>Click Me!&#x3C;/</span><span style="color:#F92672">mtn-button</span><span style="color:#F8F8F2">></span></span></code></pre>
<p>The text “Click Me!” is projected down to the slot within the component. The markup in the component will be the following:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#F92672">button</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">  &#x3C;</span><span style="color:#F92672">slot</span><span style="color:#F8F8F2">>Click Me!&#x3C;/</span><span style="color:#F92672">slot</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#F92672">button</span><span style="color:#F8F8F2">></span></span></code></pre>
<p>This button component is currently incredibly simple. With more complex components we will obviously have more markup, and will occasionally use multiple named slots to project multiple bits of markup down to the component. For now, we’ll stick with that for our button.</p>
<h2 id="component-props">Component Props</h2>
<p>You’ll have noticed by now if you’re familiar at all with React that these components look and function very similarly to React components. Along those lines, we’re now going to define a prop. An important piece of functionality for a button is to disable that button. Let’s use the <code>@Prop()</code> decorator to define a <code>disabled</code> property. We’re also going to pass that disabled property down to our actual button. We’ll update our class like so:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#F92672">export</span><span style="color:#66D9EF;font-style:italic"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline">Button</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  @</span><span style="color:#A6E22E">Prop</span><span style="color:#F8F8F2">({ reflectToAttr: </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2"> })</span></span>
<span class="line"><span style="color:#F8F8F2">  disabled</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> boolean</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">  render</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">      &#x3C;</span><span style="color:#F92672">button</span><span style="color:#A6E22E"> disabled</span><span style="color:#F92672">={</span><span style="color:#FD971F">this</span><span style="color:#F8F8F2">.disabled</span><span style="color:#F92672">}</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;</span><span style="color:#F92672">slot</span><span style="color:#F8F8F2"> /></span></span>
<span class="line"><span style="color:#F8F8F2">      &#x3C;/</span><span style="color:#F92672">button</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>We’ve defined a property on the class called <code>disabled</code>, and added a <code>@Prop()</code> decorator to it. We’ve also passed in an object with a <code>reflectToAttr</code> key we’ve defined to be true. According to the <a href="https://stenciljs.com/docs/properties#reflect-properties-values-to-attributes">Stencil Prop Docs</a>, using that makes sure our disabled prop stays in sync with an HTML attribute. In this case we definitely want that because we’re using a disabled attribute.</p>
<p>We are also adding <code>disabled={this.disabled}</code> to our button in the component. This will conditionally apply the disabled attribute depending on whether or not the disabled prop is defined.</p>
<h2 id="styling-our-button">Styling Our Button</h2>
<p>Currently this is an ugly HTML button. We’re obviously going to change that. I encourage you to come up with your own style guide and design for your components, but you’re of course welcome to copy what I’m doing. First off I’m going to create a file at <code>src/styles/variables.scss</code> for my color variables. If I have to change colors, I want it to apply to all the colors rather than change them one by one, so I’m using SASS variables to do that. I’m going to start with my font, a couple basic colors, and my primary color shades which is all I’m focusing on right now.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="scss"><code><span class="line"><span style="color:#88846F">// Font Family</span></span>
<span class="line"><span style="color:#F8F8F2">$font-family: </span><span style="color:#E6DB74">'Open Sans'</span><span style="color:#F8F8F2">, </span><span style="color:#E6DB74">'Helvetica Neue'</span><span style="color:#F8F8F2">, </span><span style="color:#66D9EF">Arial</span><span style="color:#F8F8F2">, </span><span style="color:#66D9EF">Helvetica</span><span style="color:#F8F8F2">, </span><span style="color:#66D9EF">sans-serif</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Basic Colors</span></span>
<span class="line"><span style="color:#F8F8F2">$white: </span><span style="color:#AE81FF">#ffffff</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">$black: </span><span style="color:#AE81FF">#000000</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Brand Colors</span></span>
<span class="line"><span style="color:#F8F8F2">$blue-steel: </span><span style="color:#AE81FF">#4571c4</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">$blue-steel-dark: </span><span style="color:#AE81FF">#315db0</span><span style="color:#F8F8F2">;</span></span></code></pre>
<p>Now that I’ve got my font and colors established, I’m going to give my button some classy styling.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="scss"><code><span class="line"><span style="color:#F92672">@import</span><span style="color:#E6DB74"> '../../styles/variables.scss'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">:host</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  box-sizing</span><span style="color:#F8F8F2">: </span><span style="color:#66D9EF">border-box</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E">:host</span><span style="color:#F8F8F2">([</span><span style="color:#A6E22E">disabled</span><span style="color:#F8F8F2">]) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  pointer-events</span><span style="color:#F8F8F2">: </span><span style="color:#66D9EF">none</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">button</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  font-family</span><span style="color:#F8F8F2">: $font-family;</span></span>
<span class="line"><span style="color:#F92672">  cursor</span><span style="color:#F8F8F2">: </span><span style="color:#66D9EF">pointer</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  border</span><span style="color:#F8F8F2">: </span><span style="color:#66D9EF">none</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  background-color</span><span style="color:#F8F8F2">: $blue-steel;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  color</span><span style="color:#F8F8F2">: $white;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  line-height</span><span style="color:#F8F8F2">: </span><span style="color:#AE81FF">20</span><span style="color:#F92672">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  font-size</span><span style="color:#F8F8F2">: </span><span style="color:#AE81FF">14</span><span style="color:#F92672">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  padding</span><span style="color:#F8F8F2">: </span><span style="color:#AE81FF">4</span><span style="color:#F92672">px</span><span style="color:#AE81FF"> 12</span><span style="color:#F92672">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  border-radius</span><span style="color:#F8F8F2">: </span><span style="color:#AE81FF">3</span><span style="color:#F92672">px</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">  &#x26;</span><span style="color:#A6E22E">:hover</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">    background-color</span><span style="color:#F8F8F2">: $blue-steel-dark;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F92672">  &#x26;</span><span style="color:#A6E22E">:active</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">    background-color</span><span style="color:#F8F8F2">: </span><span style="color:#66D9EF">darken</span><span style="color:#F8F8F2">($blue-steel-dark, </span><span style="color:#AE81FF">5</span><span style="color:#F92672">%</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F92672">  &#x26;</span><span style="color:#A6E22E">:disabled</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">    opacity</span><span style="color:#F8F8F2">: </span><span style="color:#AE81FF">0.4</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>First I’m importing my variables for use. I’m then using the <code>:host</code> selector, which allows us to select the shadow host of the Shadow DOM, for a couple different things. First of all I’m setting <code>box-sizing: border-box</code> to the host element. I personally prefer using the border-box sizing to not take into account borders for the height and width. It makes more sense to me personally. Next I’m using the host selector to <em>only</em> select the host when it has a <code>disabled</code> attribute applied to it. In that case I’m applying <code>pointer-events: none</code> to the element. This makes it so setting a click handler on the element will not fire when the button is disabled.</p>
<p>Next I’m styling my button itself. You’ll notice and possibly worry about me globally styling the <code>button</code> element. This is not a problem because we’re using the Shadow DOM, and this is one of its best benefits. All of your styling is scoped to the component’s Shadow DOM, no styles from outside can penetrate it, and no styles from inside can mess up anything outside of it. It’s pretty awesome.</p>
<p>The rest of the styles are pretty straightforward. I have the button styles, the background color darkens on hover, and darkens even more on click. When it’s disabled, I apply <code>opacity: 0.4</code> to make it look disabled.</p>
<p>If you haven’t already, make sure you run <code>npm start</code> to start up your dev server and it’ll automatically open in your browser. Go ahead and add your button to your <code>index.html</code> page so you can test your component. I added the following markup:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#F92672">mtn-button</span><span style="color:#F8F8F2">>Button&#x3C;/</span><span style="color:#F92672">mtn-button</span><span style="color:#F8F8F2">> &#x3C;</span><span style="color:#F92672">mtn-button</span><span style="color:#A6E22E"> disabled</span><span style="color:#F8F8F2">>Button&#x3C;/</span><span style="color:#F92672">mtn-button</span><span style="color:#F8F8F2">></span></span></code></pre>
<p>When your page refreshes automatically you should see your beautiful new button component in both its disabled and non-disabled states!</p>
<p><img src="/img/posts/first-stencil-component/buttons.png" alt="new buttons"></p>
<h2 id="next-steps">Next Steps</h2>
<p>There you have it! A classy button component that looks great and has basic functionality. There’s obviously a lot more to a button (and most components) that will implement, but we’ll do that in our <a href="/posts/stencil-going-deeper">next post</a>. See you there!</p>
<p><em>Simply want to see the end result repo? Check it out <a href="https://github.com/johnbwoodruff/mountain-ui">here</a></em></p>   </main> <footer class="main-footer"> <small>Copyright © 2025 • John Woodruff</small> </footer> <!-- Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46243905-9"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-46243905-9');
    </script> </body> </html>